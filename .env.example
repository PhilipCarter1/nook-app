# Nook - Example environment variables
# Copy to .env.local and fill values before running locally

# ---------------------------
# Supabase (required)
# ---------------------------
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional DB URL used by some server scripts
DATABASE_URL=postgres://user:pass@host:5432/dbname

# ---------------------------
# App / Next.js
# ---------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=Nook
NODE_ENV=development

# ---------------------------
# Stripe (required if payments enabled)
# ---------------------------
STRIPE_SECRET_KEY=sk_test_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_ID=price_...

# ---------------------------
# Email (Resend preferred) - provide either RESEND_API_KEY or SENDGRID_API_KEY
# ---------------------------
RESEND_API_KEY=re_...
# or legacy SendGrid
SENDGRID_API_KEY=SG.xxxxx
EMAIL_FROM=noreply@nook.app
EMAIL_FROM_NAME="Nook Team"

# ---------------------------
# Security (must be secure/random; ENCRYPTION_KEY/JWT/SESSION should be 32 chars)
# ---------------------------
ENCRYPTION_KEY=32_character_random_secret_here________
JWT_SECRET=32_character_random_secret_here_________
SESSION_SECRET=32_character_random_secret_here_____
AUTH_SECRET=your_next_auth_secret_if_used

# ---------------------------
# Feature flags (toggle features)
# Set to true/false as needed
# ---------------------------
ENABLE_PAYMENT_PROCESSING=true
ENABLE_DOCUMENT_MANAGEMENT=false
ENABLE_VENDOR_MANAGEMENT=false
ENABLE_SPLIT_RENT=false
ENABLE_ONBOARDING=true

# ---------------------------
# Developer notes
# - Keep SUPABASE_SERVICE_ROLE_KEY and STRIPE_SECRET_KEY out of frontend/public envs
# - On Vercel, set these in Project Settings -> Environment Variables (Production/Preview)
# - Webhook secret comes from the Stripe dashboard when you configure the webhook endpoint
# ---------------------------
# ============================================================================
# NOOK SaaS - ENVIRONMENT VARIABLES
# ============================================================================
# This is the complete list of environment variables required for Nook.
# Copy this file to .env.local and fill in the actual values.
#
# Production deployments must use Vercel Environment Variables.
# See: https://vercel.com/docs/projects/environment-variables
#
# ============================================================================
# SUPABASE CONFIGURATION (REQUIRED)
# ============================================================================
# Get these from your Supabase project settings:
# https://app.supabase.com/project/{project-id}/settings/api
#
# The ANON_KEY is safe to expose in the browser (used by next-supabase-client)
NEXT_PUBLIC_SUPABASE_URL="your-supabase-url-here"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-supabase-anon-key-here"

# Service Role Key - NEVER expose to frontend or browser
# Only use in API routes and server-side functions
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# Database connection string (PostgreSQL)
DATABASE_URL="postgresql://user:password@host:5432/database"
DRIZZLE_DB_URL="postgresql://user:password@host:5432/database"

# Supabase Storage Configuration
STORAGE_BUCKET="documents"
STORAGE_URL="your-supabase-url-here"

# ============================================================================
# STRIPE CONFIGURATION (REQUIRED FOR PAYMENTS)
# ============================================================================
# Get API keys from: https://dashboard.stripe.com/apikeys
# Use TEST keys for development, LIVE keys for production
#
# Secret Key - NEVER expose to frontend
STRIPE_SECRET_KEY="sk_test_your_key_here"

# Publishable Key - Safe to expose in browser
STRIPE_PUBLISHABLE_KEY="pk_test_your_key_here"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_key_here"

# Webhook Secret - Used to verify Stripe webhook authenticity
# Generate by creating a webhook endpoint at:
# https://dashboard.stripe.com/webhooks
# Point to: https://your-domain.com/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret_here"

# Price ID for subscription or one-time product
# Get from: https://dashboard.stripe.com/products
# Format: price_1xxxxxxxxxxxxxxxxxx
STRIPE_PRICE_ID="price_your_price_id_here"

# ============================================================================
# EMAIL CONFIGURATION (REQUIRED)
# ============================================================================
# Choose ONE email service: Resend (recommended) or SendGrid
#
# RESEND (Recommended for simplicity)
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY="re_your_api_key_here"

# Email address to send from
# For Resend in development, use: onboarding@resend.dev
# For production, use your verified sender domain
EMAIL_FROM="onboarding@resend.dev"
EMAIL_FROM_NAME="Nook Team"

# SENDGRID (Alternative)
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=""

# ============================================================================
# AUTHENTICATION & SECURITY (REQUIRED)
# ============================================================================
# Generate random secrets using:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Encryption key for sensitive data
ENCRYPTION_KEY="your-random-32-byte-hex-string-here"

# JWT signing key (Supabase auth)
JWT_SECRET="your-random-32-byte-hex-string-here"

# Session encryption key
SESSION_SECRET="your-random-32-byte-hex-string-here"

# Authentication secret (NextAuth.js if using)
AUTH_SECRET="your-random-32-byte-hex-string-here"

# ============================================================================
# API & RATE LIMITING CONFIGURATION
# ============================================================================
# Rate limiting window in milliseconds (3600000 = 1 hour)
RATE_LIMIT_WINDOW_MS="3600000"

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS="100"

# API rate limit
API_RATE_LIMIT="100"

# API timeout in milliseconds
API_TIMEOUT="30000"

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
# Redis URL for caching (optional)
REDIS_URL=""

# Cache TTL in seconds
CACHE_TTL="3600"

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
# Application name
NEXT_PUBLIC_APP_NAME="Nook"
NEXT_PUBLIC_APP_DESCRIPTION="Modern Property Management Platform"

# Application URL (for email links, etc.)
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ============================================================================
# SENTRY ERROR TRACKING (Optional)
# ============================================================================
# Get DSN from: https://sentry.io/
NEXT_PUBLIC_SENTRY_DSN=""
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# ============================================================================
# FEATURE FLAGS (CONTROL FUNCTIONALITY)
# ============================================================================
# Enable/disable features in this environment
# Set to "true" or "false" as strings
#
# Payment processing integration
ENABLE_PAYMENT_PROCESSING="true"

# Document management system
ENABLE_DOCUMENT_MANAGEMENT="true"

# Vendor/contractor management
ENABLE_VENDOR_MANAGEMENT="true"

# Split rent functionality (roommates splitting rent)
ENABLE_SPLIT_RENT="true"

# Onboarding flow for new users
ENABLE_ONBOARDING="true"

# Maintenance request tracking
ENABLE_MAINTENANCE_REQUESTS="true"

# Legal assistant (document templates, etc.)
NEXT_PUBLIC_ENABLE_LEGAL_ASSISTANT="true"

# Concierge services
NEXT_PUBLIC_ENABLE_CONCIERGE="true"

# Custom branding
NEXT_PUBLIC_ENABLE_CUSTOM_BRANDING="true"

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
# Log level: error, warn, info, debug
LOG_LEVEL="info"

# Enable APM (Application Performance Monitoring)
ENABLE_APM="false"

# ============================================================================
# SECURITY HEADERS
# ============================================================================
# Enable security headers in API responses
ENABLE_HSTS="true"
ENABLE_CSP="true"
ENABLE_XSS_PROTECTION="true"
ENABLE_FRAME_PROTECTION="true"
ENABLE_CONTENT_TYPE_PROTECTION="true"
ENABLE_REFERRER_POLICY="true"
ENABLE_PERMISSIONS_POLICY="true"

# ============================================================================
# DEPLOYMENT & MAINTENANCE
# ============================================================================
# Enable maintenance mode (shows maintenance page to all users)
MAINTENANCE_MODE="false"
MAINTENANCE_MESSAGE="System maintenance in progress. Please try again later."

# API version
API_VERSION="v1"

# Allowed origins for CORS
ALLOWED_ORIGINS="http://localhost:3000"

# ============================================================================
# ANALYTICS (Optional)
# ============================================================================
# Google Analytics or similar
ANALYTICS_ID=""
ENABLE_ANALYTICS="false"
